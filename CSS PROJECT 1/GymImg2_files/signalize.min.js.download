!function(){class e{static urlB64ToUint8Array(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(t),s=new Uint8Array(i.length);for(let e=0;e<i.length;++e)s[e]=i.charCodeAt(e);return s}static isSupported(){return!!e.isSupportedSafari()||"serviceWorker"in navigator&&"PushManager"in window&&!(!navigator.serviceWorker||!window.PushManager)}static isSupportedSafari(){const e="PushManager"in window;return"safari"in window&&"object"==typeof window.safari&&"pushNotification"in window.safari&&!e}static async hasServiceWorker(t={}){return!!e.isSupportedSafari()||e.isSupported()&&void 0!==await navigator.serviceWorker.getRegistration(t.scope)}static async getStatus(){return await Notification.permission}static getNotificationStatus(){return Notification.permission}static getExternalId(){const e="et_exid";try{const t=new URLSearchParams(window.location.search);return t.has(e)?t.get(e):window[e]}catch(e){console.error(e)}}static async getActiveSubscription(t,i="/sw.js",s={}){if(e.isSupported()&&"granted"===await e.getStatus())try{let n=await navigator.serviceWorker.getRegistration(s.scope);if(!n&&(n=await e.registerServiceWorker(i,s),!n))return;let r=await n.pushManager.getSubscription();return!r&&t&&(await e.subscribeUser(n,t,"https://api.signalize.com"),r=await n.pushManager.getSubscription()),r}catch(t){console.warn("Error fetching the active subscription: ",t)}}static async registerServiceWorker(t="/sw.js",i={}){if(e.isSupported())try{const e=await navigator.serviceWorker.getRegistration(i.scope);if(void 0!==e&&e.active.scriptURL.includes("url[]=https%3A%2F%2Fapi.signalize.com%2Fserviceworker.js"))return e;const s=await navigator.serviceWorker.register(t,i);return i.scope||await navigator.serviceWorker.ready,s}catch(t){console.warn("registerServiceWorker failed!")}}static async subscribeUser(t,i,s){const n=await e.getPublicKeyArray(i,s);try{return await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n})}catch(t){console.warn("subscribeUser failed: ",t)}return!1}static async subscribeUserV2(t,i,s="https://safari.signalize.com/safari-api"){try{return e.isSupportedSafari()?new Promise(i=>{window.safari.pushNotification.requestPermission(s,t.pushId,{clientId:t.userId,externalId:e.getExternalId()||"",websiteUrl:window.location.protocol+"//"+window.location.host},e=>{console.log("Safari-Result:"),console.log(e),i(!0)})}):await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i})}catch(t){}return!1}static async reSubscribe(t,i,s,n={}){await e.disable();const r=await e.enableV2(t,i,s,"https://api.signalize.com",n);await e.subscribeUserV2(r.serviceWorker,r.serverKey)}static async deleteServiceWorkers(){if(window.navigator&&navigator.serviceWorker){const e=await navigator.serviceWorker.getRegistrations();for(let t of e)await t.unregister()}}static async sendSubscriptionToServer(t,i,s,n="sw.js",r={}){if(e.isSupportedSafari())return!0;const a=await e.getActiveSubscription(i,n,r);if(a){const n=JSON.parse(JSON.stringify(a)),r={endpoint:n.endpoint,key:n.keys.p256dh,auth:n.keys.auth,language:navigator.language,externalId:e.getExternalId()},o={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},c=await fetch(`${t}/v3/accounts/${i}/web/subscriptions/${s}`,o);return 200<=c.status&&300>c.status}return!1}static async deleteSubscriptionFromServer(e,t,i){const s=await fetch(`${e}/v3/accounts/${t}/web/subscriptions/${i}`,{method:"DELETE"});return 200<=s.status&&300>s.status}static async enable(t,i,s,n="https://api.signalize.com",r={}){if(e.isSupported()){console.warn("NotiParrot.enable is deprecated, use enableV2 instead!");const a=e.getNotificationStatus();if("denied"===a)return console.warn("Client doesn't want push!"),!1;if("granted"===a&&await e.hasServiceWorker(r))return console.warn("Push already registered!"),!1;if("granted"===a||"default"===a)try{const o=await e.registerServiceWorker(t,r);if(o)return await e.subscribeUser(o,i,n),"default"===a&&window.localStorage&&window.localStorage.removeItem("notiParrotLastSent"),await e.sendSubscriptionToServer(n,i,s,t,r)}catch(t){console.error("Service Worker Error",t)}}return!1}static async enableV2(t,i,s,n="https://api.signalize.com",r={}){if(e.isSupported()){const a=await e.getStatus();if("denied"===a)return void console.warn("Client doesn't want push!");if("granted"===a&&await e.hasServiceWorker(r))return void console.warn("Push already registered!");if("granted"===a||"default"===a)try{if(e.isSupportedSafari()){const t=await e.getSafariPushId(n,i);return t?{serviceWorker:{pushId:t,userId:s},serverKey:"0"}:void 0}const a=await e.registerServiceWorker(t,r);if(a){return{serviceWorker:a,serverKey:await e.getPublicKeyArray(i,n)}}}catch(t){console.error("Service Worker Error",t)}}}static async disable(){return e.isSupportedSafari()?void console.warn("NotiParrot.disable not supported on safari!"):void await this.deleteServiceWorkers()}static async getPublicKeyArray(t,i){const s=await fetch(i+"/api/v1/push/key/get-current/"+t).then(e=>e.text());return e.urlB64ToUint8Array(s)}static async getLocalPublicKeyArray(e={}){const t=await navigator.serviceWorker.getRegistration(e.scope);if(t){const e=await t.pushManager.getSubscription();if(e&&e.options&&e.options.applicationServerKey)return new Uint8Array(e.options.applicationServerKey)}}static async getSafariPushId(t,i){if(!e.safariPushId){const s=await fetch(`${t}/api/v1/safari/push-ids/${i}`);200==s.status&&(e.safariPushId=await s.text())}return e.safariPushId}}class t{static isSupported(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window}constructor(e,t,i){this.accountId=parseInt(e),this.userId=t,this.iframeHost=i,this.iframeId="63b6e216-a08f-11e8-98d0-529269fb1459",this.popupWindow=void 0,this.popupWidth=500,this.popupHeight=338,window.addEventListener("message",e=>this.handleMessage(e)),this.messageCallback=void 0}generateUrl(){const e=encodeURIComponent(this.userId);return`${this.iframeHost}?accountId=${this.accountId}&userId=${e}&origin=${location.origin}`}async getIframeStatus(){const e=this.waitForMessage("status"),t=document.createElement("iframe");t.setAttribute("id",this.iframeId),t.setAttribute("width",0),t.setAttribute("height",0),t.setAttribute("hidden","hidden"),t.setAttribute("src",this.generateUrl()),document.body.appendChild(t);const i=await e,s=document.getElementById(this.iframeId);return s.parentNode.removeChild(s),i}async enable(e){if(this.popupWindow)return"opened";const t=e&&e.explain?500:this.popupHeight,i=(screen.availLeft||0)+(screen.width-this.popupWidth)/2,s=(screen.height-this.popupHeight)/2-32,n=this.waitForMessage("status");this.popupWindow=window.open(this.generateUrl(),"PushPopup",`width=${this.popupWidth}, height=${t}, top=${s}, left=${i}`),await n;const r=setInterval(()=>{this.popupWindow.closed&&this.messageCallback&&(this.messageCallback({type:"enable",data:"closed"}),this.popupWindow=void 0)},1e3),a=await this.sendMessage(this.popupWindow,"enable",e);return clearInterval(r),this.clearMessageCallback(),a}closePopup(){this.popupWindow&&"function"==typeof this.popupWindow.close&&this.popupWindow.close(),this.popupWindow=void 0}async getStatus(){const e=window.Notification.permission;let t="default";try{t=await this.getIframeStatus()}catch(e){console.warn(e)}return"denied"===e?t:"granted"===t?"granted":"default"}async sendMessage(e,t,i){if(!e)return!1;const s=this.waitForMessage(t);return e.postMessage({type:t,data:i},this.iframeHost),s}handleMessage(e){e.origin!==this.iframeHost||"function"==typeof this.messageCallback&&this.messageCallback(e.data)&&this.clearMessageCallback()}waitForMessage(e){return"function"==typeof this.messageCallback?void 0:new Promise(t=>{this.messageCallback=i=>{if(i.type===e)return t(i.data),!0}})}clearMessageCallback(){this.messageCallback=void 0}}class i{constructor(e,t){this.data={},this.allowedCheck=t,this.realStorage=e?window.localStorage:window.sessionStorage,this.realStorage||(this.allowedCheck=()=>!1)}setItem(e,t){this.allowedCheck()?this.realStorage.setItem(e,t):this.data[e]=t+""}getItem(e){return this.allowedCheck()?this.realStorage.getItem(e):this.data[e]}removeItem(e){delete this.data[e],this.realStorage&&this.realStorage.removeItem(e)}}class s{closeOverlay(){"function"==typeof window.et_stopOptInPushOverlay&&window.et_stopOptInPushOverlay()}startOverlay(){}getPopUpTexts(){"function"==typeof window.et_getPopUpTexts&&window.et_getPopUpTexts()}addClassToClass(e,t){document.getElementsByClassName(e).length&&document.getElementsByClassName(e)[0].classList.add(t)}removeClassFromClass(e,t){document.getElementsByClassName(e).length&&document.getElementsByClassName(e)[0].classList.remove(t)}addClassToId(e,t){document.getElementById(e)&&document.getElementById(e).classList.add(t)}removeClassFromId(e,t){document.getElementById(e)&&document.getElementById(e).classList.remove(t)}adjustEnabledOptInClasses(){}}function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function r(e){for(var t,i=1;i<arguments.length;i++)t=null==arguments[i]?{}:arguments[i],i%2?n(Object(t),!0).forEach((function(i){a(e,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}));return e}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o=function(e){function t(e){return"function"==typeof e?function(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(d(this),t),i(o.get(this))}:function(...t){return i(e.apply(d(this),t))}:function(t,...s){const n=e.call(d(this),t,...s);return u.set(n,t.sort?t.sort():[t]),i(n)}}(e):(e instanceof IDBTransaction&&function(e){if(!c.has(e)){const t=new Promise((t,i)=>{const s=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",r),e.removeEventListener("abort",r)},n=()=>{t(),s()},r=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",n),e.addEventListener("error",r),e.addEventListener("abort",r)});c.set(e,t)}}(e),t=e,(n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,p):e);var t}function i(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,s)=>{const n=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{t(i(e.result)),n()},a=()=>{s(e.error),n()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&o.set(t,e)}).catch(()=>{}),l.set(t,e),t}(e);if(h.has(e))return h.get(e);const s=t(e);return s!==e&&(h.set(e,s),l.set(s,e)),s}function s(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(b.get(t))return b.get(t);const i=t.replace(/FromIndex$/,""),s=t!==i,n=w.includes(i);if(i in(s?IDBIndex:IDBObjectStore).prototype&&(n||g.includes(i))){const e=async function(e,...t){const r=this.transaction(e,n?"readwrite":"readonly");let a=r.store;return s&&(a=a.index(t.shift())),(await Promise.all([a[i](...t),n&&r.done]))[0]};return b.set(t,e),e}}let n,a;const o=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,l=new WeakMap;let p={get(e,t,s){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return i(e[t])},set:(e,t,i)=>(e[t]=i,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};const d=e=>l.get(e),g=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],b=new Map;return p=(e=>r(r({},e),{},{get:(t,i,n)=>s(t,i)||e.get(t,i,n),has:(t,i)=>!!s(t,i)||e.has(t,i)}))(p),e.deleteDB=function(e,{blocked:t}={}){const s=indexedDB.deleteDatabase(e);return t&&s.addEventListener("blocked",()=>t()),i(s).then(()=>{})},e.openDB=function(e,t,{blocked:s,upgrade:n,blocking:r,terminated:a}={}){const o=indexedDB.open(e,t),c=i(o);return n&&o.addEventListener("upgradeneeded",e=>{n(i(o.result),e.oldVersion,e.newVersion,i(o.transaction))}),s&&o.addEventListener("blocked",()=>s()),c.then(e=>{a&&e.addEventListener("close",()=>a()),r&&e.addEventListener("versionchange",()=>r())}).catch(()=>{}),c},e.unwrap=d,e.wrap=i,e}({});window.et_signalize=new class{constructor(t="https://api.signalize.com",n="/sw.js",r=""){if(this.NotiParrot=e,this.accountId=parseInt("330216"),this.accountToken="XEB9ppV",this.apiUrl=t,this.et=window._etracker,this.idb=o,this.notiParrotFrame=void 0,this.registration=void 0,this.optIn=new s,!this.checkServiceWorker(n,r))throw`Scope "${r}" does not fit with service worker "${n}"`;this.swPath=n,this.swScope=r?{scope:r}:{},this.cookiesAllowed=()=>!(!this.et||!this.et.areCookiesEnabled||!this.et.areCookiesEnabled()),this.sessionStorage=new i(!1,()=>this.cookiesAllowed()),this.localStorage=new i(!0,()=>this.cookiesAllowed()),this.language=window.et_la||navigator.language,this.pushSubdomain=(window.et_optInPushDomain||"").trim(),this.hasOptInPushDomain=!!window.et_hasOptInPushDomain,this.useNativeOptIn=!!window.et_optInNative,this.pushSubdomain.startsWith(".")&&(this.pushSubdomain=""),this.refreshClientId()}refreshClientId(){this.clientId=this.et&&this.et.getCoid&&this.et.getCoid(),this.clientId||(this.clientId=this.generateClientId())}generateClientId(){let e="";const t=window.crypto||window.msCrypto,i=new Uint8Array(16);t.getRandomValues(i);for(let t=0;t<i.length;++t)e+=(16>i[t]?"0":"")+i[t].toString(16);return e}getClientId(){return this.clientId}isIPhone(){return/iPhone/.test(navigator.userAgent)}isGerman(){return/^de\b/i.test(this.language)}async checkPendingEvents(){if("undefined"==typeof IDBIndex)return;const e=await o.openDB("signalize",1,{upgrade(e){e.createObjectStore("events")}}),t=await e.getAllKeys("events");if(t.length){fetch(this.apiUrl+"/v3/accounts/0/web/subscriptions/0/errors",{method:"post",mode:"cors",body:"unsent events: "+window.location.hostname+": "+t.join(",")});for(let i of t)await e.delete("events",i)}}checkServiceWorker(e,t){if(!t)return!0;const i=e.substring(0,e.lastIndexOf("/")+1);return t.startsWith(i)}getInterests(){let e="";const t=document.forms["et-promote-interests"]?document.forms["et-promote-interests"].elements.SIGNALIZE_INTEREST:document.getElementsByClassName("SIGNALIZE_INTEREST");return t&&(e=(t.length?[...t]:[t]).filter(e=>e.checked).map(e=>e.value).join(", ")),e||"STR_CC_ATTR_VALUE_NO_ALLOCATION"}sendSelectedInterests(e){if(document.getElementById("et-promote-interests-active")){const t=et_SignalizeInterestEvent(this.getInterests(),"Web Push","web push interests chosen",e);this.et.sendEvent(t)}}blockOptInPush(e,t,i){t=t||"Box";let s="user blocks opt-in dialog for a month";("boolean"==typeof(e=e||30)||1===e)&&(e=1,s="user blocks opt-in dialog for session"),this.setOptInPushCookie("no",e),this.et.sendEvent(et_SignalizeOptInEvent("Opt-In - "+t,"Web Push",s,i))}getOptInPushCookie(){const e=window.et_getCookieValue("et_oip",!0);return!(!e||"undefined"===e||"false"===e)&&e}stopPushOptInOverlay(){this.optIn.closeOverlay()}setOptInPushCookie(e,t){if(window.et_getDefaultCookieDomain&&window.et_setCookieValue){const i=et_getDefaultCookieDomain();et_setCookieValue("et_oip",e,t,i,1<t)}}unsetOptInPushCookie(){if(window.et_getDefaultCookieDomain&&window.et_setCookieValue){const e=et_getDefaultCookieDomain();et_setCookieValue("et_oip",void 0,0,e,!1),this.localStorage.removeItem("et_oip")}}async showNativePushOptIn(){this.getOptInPushCookie()||(this.registration=await this.NotiParrot.enableV2(this.swPath,this.accountId,this.clientId,this.apiUrl,this.swScope),this.registration&&this.showBanner(!0))}async showPopupPushOptIn(){if(!this.getOptInPushCookie()){"default"===await this.getPopUpStatus()&&this.showBanner(!1)}}async getPopUpStatus(){return this.notiParrotFrame=new t(this.accountId,this.clientId,"https://"+this.pushSubdomain),await this.notiParrotFrame.getStatus()}require(e,t){et_createScriptTag(`${this.apiUrl}/banners/accounts/${this.accountId}${t?"/"+t:""}?${e}`)}getUrl(){return encodeURIComponent(window.cc_url||window.et_url||document.location.href)}showBanner(e=!1){this.require(`url=${this.getUrl()}&lang=${this.language}${e?"&oneStep=true":""}`)}showActionButton(){this.require(`url=${this.getUrl()}&lang=${this.language}`,"action")}showExplanation(){this.require(`url=${this.getUrl()}&lang=${this.language}`,"explanation")}resetCookie(e){const t=this.getOptInPushCookie();this.useNativeOptIn&&"default"===e&&t&&"no"!==t&&this.unsetOptInPushCookie()}async checkMatchingWebKeys(){const e=await this.NotiParrot.getPublicKeyArray(this.accountId,this.apiUrl),t=await this.NotiParrot.getLocalPublicKeyArray();if(!e||!t||e.byteLength!=t.byteLength)return!1;for(let i=0;i<t.length;++i)if(t[i]!=e[i])return!1;return!0}shouldCheckSubscription(){if(!this.useNativeOptIn)return!1;const e=!!this.sessionStorage.getItem("signalizeSubscriptionChecked");return this.sessionStorage.setItem("signalizeSubscriptionChecked",!0),!e}async checkSubscription(){this.localStorage.setItem("signalizeIsSubscriber",!0),await this.checkMatchingWebKeys()||await this.NotiParrot.reSubscribe(this.swPath,this.accountId,this.clientId,this.swScope),this.NotiParrot.sendSubscriptionToServer(this.apiUrl,this.accountToken,this.clientId,this.swPath,this.swScope)}async deleteSubscription(){this.localStorage.getItem("signalizeIsSubscriber")&&(await this.NotiParrot.deleteSubscriptionFromServer(this.apiUrl,this.accountToken,this.clientId),this.localStorage.removeItem("signalizeIsSubscriber"))}enableSubscription(e,t,i,s){this.et.enableCookies(window.et_getDefaultCookieDomain()),this.refreshClientId(),this.et.sendEvent(e),this.setOptInPushCookie("yes",t),i&&this.sendSelectedInterests(s)}async enableNativePushOptIn(e,t,i){e=e||"Banner",t=t||!1,this.registration||(this.registration=await this.NotiParrot.enableV2(this.swPath,this.accountId,this.clientId,this.apiUrl,this.swScope));const s=await this.NotiParrot.subscribeUserV2(this.registration.serviceWorker,this.registration.serverKey);s?(this.enableSubscription(et_SignalizeOptInEvent("Native Opt-In - "+e,"Web Push","web push status set to true",i),30,!t,i),this.et.sendEvent(et_SignalizeOptInEvent("Native Opt-In - "+e,"Web Push","subscribed",i)),this.localStorage.setItem("signalizeIsSubscriber",!0)):(this.setOptInPushCookie("denied",30),this.et.sendEvent(et_SignalizeOptInEvent("Native Opt-In - "+e,"Web Push","web push status set to false",i))),this.NotiParrot.sendSubscriptionToServer(this.apiUrl,this.accountToken,this.clientId,this.swPath,this.swScope),t&&s||this.stopPushOptInOverlay()}async enablePopupPushOptIn(e,i){e=e||"Box",this.et.sendEvent(et_SignalizePopUpEvent("Pop-Up - "+e,"Web Push","popup opens",i)),this.notiParrotFrame||(this.notiParrotFrame=new t(this.accountId,this.clientId,"https://"+this.pushSubdomain));try{const t=this.optIn.getPopUpTexts(),s=await this.notiParrotFrame.enable(t),n=et_SignalizePopUpEvent("Pop-Up - "+e,"Web Push","web push status set to "+s,i);"granted"===s?(this.enableSubscription(n,30,!0,i),this.et.sendEvent(et_SignalizePopUpEvent("Pop-Up - "+e,"Web Push","subscribed",i))):"denied"===s?(this.et.sendEvent(n),this.setOptInPushCookie("denied",30)):(this.et.sendEvent(n),this.setOptInPushCookie("no",30)),this.stopPushOptInOverlay(),this.notiParrotFrame.closePopup()}catch(e){this.stopPushOptInOverlay(),this.notiParrotFrame.closePopup()}}enableWallet(e){e=e||"Banner",this.optIn.adjustEnabledOptInClasses(),this.stopPushOptInOverlay(),this.enableSubscription(et_SignalizeOptInEvent("Opt-In - "+e,"Wallet Push","button allow"),480,!0);const t=`${this.apiUrl}/v3/accounts/${this.accountToken}/wallet/subscriptions/${this.clientId}/pass`;location.assign(t)}disableWallet(e){e=e||"Banner",this.setOptInPushCookie("no",30),this.et.sendEvent(et_SignalizeOptInEvent("Opt-In - "+e,"Wallet Push","button deny"))}async getSubscriptionStatus(){const e=await this.NotiParrot.getStatus();return"default"===e&&this.pushSubdomain?await this.getPopUpStatus():e}getNativeSubscriptionStatus(){return this.NotiParrot.getNotificationStatus()}async runWeb(){let e=await this.NotiParrot.getStatus();"default"===e&&(this.resetCookie(e),!this.hasOptInPushDomain&&this.useNativeOptIn||this.NotiParrot.isSupportedSafari()||this.useNativeOptIn?await this.showNativePushOptIn():this.pushSubdomain&&(e=await this.getPopUpStatus(),"default"===e&&await this.showPopupPushOptIn(this.apiUrl,this.accountId,"https://"+this.pushSubdomain,this.language))),"granted"===e?(this.setOptInPushCookie("yes",30),this.shouldCheckSubscription()&&(await this.checkSubscription(),await this.checkPendingEvents())):await this.deleteSubscription(),"denied"===e&&this.setOptInPushCookie("denied",30),"denied"===this.getOptInPushCookie()&&await this.showExplanation()}async runWallet(){this.getOptInPushCookie()||this.isGerman()&&this.showBanner()}async run(){try{if(this.NotiParrot.isSupported())return await this.runWeb();if(this.isIPhone())return await this.runWallet()}catch(e){console.log("signalize failed: ",e)}}}(_etracker.getConfigValue("signalizeApiUrl"),_etracker.getConfigValue("signalizeServiceWorkerPath"),_etracker.getConfigValue("signalizeServiceWorkerScope")),!1!==window._etracker.getConfigValue("signalizeAutoStart")&&window.et_signalize.run().then(()=>{}).catch(e=>console.error(e)),(()=>{const e=document.location.href.split("#");e[1]&&"showOptIn"===e[1]&&window.et_signalize.showBanner()})(),window.et_openNativeOptIn=(e,t,i)=>window.et_signalize.enableNativePushOptIn(i,!1),window.et_openNativeOptInForMobile=(e,t,i)=>window.et_signalize.enableNativePushOptIn(i,!0),window.et_showBanner=(e,t,i,s)=>window.et_signalize.showBanner(s),window.et_enablePush=e=>window.et_signalize.enablePopupPushOptIn(e),window.et_sendInterests=()=>window.et_signalize.sendSelectedInterests(),window.et_blockOptInPush=(e,t)=>window.et_signalize.blockOptInPush(e,t),window.et_setOptInPushCookie=(e,t)=>window.et_signalize.setOptInPushCookie(e,t),window.et_SignalizeOptInEvent=(e,t,i,s)=>window.et_GenericEvent("signalizeOptIn",1,{object:e,category:t,action:i,event_sub_type:s}),window.et_SignalizePopUpEvent=(e,t,i,s)=>window.et_GenericEvent("signalizePopUp",1,{object:e,category:t,action:i,event_sub_type:s}),window.et_SignalizeInterestEvent=(e,t,i,s)=>window.et_GenericEvent("signalizeInterest",1,{object:e,category:t,action:i,event_sub_type:s})}();